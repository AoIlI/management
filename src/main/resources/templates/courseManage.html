<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>课程管理</title>
    <link rel="stylesheet" href="/css/user.css">
</head>
<body>

<!-- 顶栏 -->
<div class="topbar">
    <div class="topbar-left">
        欢迎，<span id="username">李华</span>
    </div>
    <div class="topbar-right">
        <button onclick="togglePopup()">更多 ▾</button>
        <div id="popup" class="popup">
            <p>角色：管理员</p>
            <p>邮箱：test@test.com</p>
            <button onclick="logout()">退出登录</button>
        </div>
    </div>
</div>

<!-- 主体 -->
<div class="container">
    <!-- 侧边栏 -->
    <div class="sidebar">
        <a href="/user">用户管理</a>
        <a href="/purchase_course">购买课程</a>
        <a href="/order">课程预约</a>
        <a href="/info">个人信息</a>
        <a href="/equipment">设备状态</a>
        <a href="/equipmentManage">设备管理</a>
        <a href="/staffManage">员工管理</a>
        <a href="/courseManage">课程管理</a>
    </div>

    <!-- 内容区域 -->
    <div class="content">
        <h2>欢迎进入管理系统</h2>

        <!-- 表格工具栏 -->
        <div class="table-toolbar">
            <div class="toolbar-left">
                <input type="text" id="searchInput" placeholder="搜索课程名 / 教练名 / 课程ID">
                <button onclick="searchCourse()">搜索</button>
            </div>
            <div class="toolbar-right">
                <button class="add-btn" onclick="openAddModal()">添加课程</button>
                <button class="export-btn" onclick="exportExcel()">导出 Excel</button>
            </div>
        </div>

        <div class="table-wrapper">
        <table class="user-table" id="userTable">
            <thead>
            <tr>
                <th>课程名</th>
                <th>教练名</th>
                <th>上课日期</th>
                <th>上课时间</th>
                <th>课程时长</th>
                <th>课容量</th>
                <th>当前选课人数</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <!-- JS 动态插入 -->
            </tbody>
        </table>
    </div>
        <script src="/js/coursemanage.js"></script>
    </div>
</div>

<script src="/js/main.js"></script>

<!-- 修改课程弹窗 -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeEditModal()">&times;</span>
        <h3>修改课程信息</h3>
        <form id="editForm" onsubmit="submitEditForm(event)">
            <label>课程ID</label>
            <label for="editClassId"></label><input type="text" id="editClassId" name="class_id" readonly>

            <label>课程名</label>
            <label for="editClassName"></label><input type="text" id="editClassName" name="class_name">

            <label>教练ID</label>
            <label for="editCoachId"></label><input type="text" id="editCoachId" name="coach_id">

            <label>上课日期（周几，1-7，1表示周一，7表示周日）</label>
            <label for="editDayOfWeek"></label><input type="number" id="editDayOfWeek" name="day_of_week" min="1" max="7" required>

            <label>上课时间</label>
            <label for="editClassTime"></label><input type="time" id="editClassTime" name="class_time" required>

            <label>课程时长（分钟）</label>
            <label for="editDurationMinutes"></label><input type="number" id="editDurationMinutes" name="duration_minutes" required>

            <label>课容量</label>
            <label for="editMaxCapacity"></label><input type="number" id="editMaxCapacity" name="max_capacity" required>

            <label>当前选课人数</label>
            <label for="editCurrentEnrollment"></label><input type="number" id="editCurrentEnrollment" name="current_enrollment" readonly>

            <button type="submit">保存修改</button>
        </form>
    </div>
</div>

<!-- 添加课程弹窗 -->
<div id="addModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeAddModal()">&times;</span>
        <h3>添加课程</h3>

        <!-- 错误提示区域 -->


        <form id="addForm" onsubmit="submitAddForm(event)">
            <label>课程ID</label>
            <label for="addClassId"></label>
            <div id="addErrorMsg" class="form-error"></div>
            <input type="text" id="addClassId" name="class_id" required>

            <label>课程名</label>
            <label for="addClassName"></label>
            <input type="text" id="addClassName" name="class_name" required>

            <label>教练ID</label>
            <label for="addCoachId"></label>
            <input type="text" id="addCoachId" name="coach_id" required>

            <label>上课日期（周几，1-7，1表示周一，7表示周日）</label>
            <label for="addDayOfWeek"></label>
            <input type="number" id="addDayOfWeek" name="day_of_week" min="1" max="7" required>

            <label>上课时间</label>
            <label for="addClassTime"></label>
            <input type="time" id="addClassTime" name="class_time" required>

            <label>课程时长（分钟）</label>
            <label for="addDurationMinutes"></label>
            <input type="number" id="addDurationMinutes" name="duration_minutes" required>

            <label>课容量</label>
            <label for="addMaxCapacity"></label>
            <input type="number" id="addMaxCapacity" name="max_capacity" required>

            <label>当前选课人数</label>
            <label for="addCurrentEnrollment"></label>
            <input type="number"
                   id="addCurrentEnrollment"
                   name="current_enrollment"
                   value="0"
                   readonly>

            <button type="submit">确认添加</button>
        </form>
    </div>
</div>

</body>
</html>
